// Get the scan frequency input element from the options page
const scanFrequencyInput = document.getElementById("scanFrequency");

// Load the current scan frequency from storage and set the input value
chrome.storage.sync.get("scanFrequency", (data) => {
  const scanFrequency = data.scanFrequency || 10; // Default to 10 seconds if no value is found
  scanFrequencyInput.value = scanFrequency;
});

// Listen for form submit events on the options page
document.querySelector("form").addEventListener("submit", (event) => {
  event.preventDefault();
  // Save the new scan frequency to storage
  const scanFrequency = parseInt(scanFrequencyInput.value);
  chrome.storage.sync.set({ scanFrequency: scanFrequency }, () => {
    // Notify the user that the options have been saved
    const statusMessage = document.createElement("div");
    statusMessage.textContent = "Options saved.";
    statusMessage.style.color = "green";
    document.body.appendChild(statusMessage);
    setTimeout(() => {
      statusMessage.remove();
    }, 3000);
  });
});
